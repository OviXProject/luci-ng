[
  "uciUI('system', '@system', 0, 'zonename')",
  {
    "widget": "set-button",
    "options": {
      "title": "Local Time",
      "description=": "a.toDateString() + ' ' + a.toLocaleTimeString()",
      "buttonTitle": "Sync with Browser"
    },
    "events": {
      "onSetup": "$parentContext.a = new Date(ubus('luci', 'getLocaltime').result * 1000 + (new Date()).getTimezoneOffset() * 60000)",
      "onClick": [
        "ubus('luci', 'setLocaltime', {localtime: Math.floor(Date.now() / 1000)}).result &&",
        "snackbar('Time changed')"
      ]
    }
  },

  {
    "widget": "set-expansion",
    "bind": "uci.system['@timeserver'][0]",
    "if": "ubus('file','stat', {path: '/usr/sbin/ntpd'}, { 0: null })",
    "options": {
      "title": "Time Synchronization",
      "description=": "`NTP is ${$.enabled ? 'enabled': 'disabled'}`"
    },
    "content": [
      {
        "widget": "set-button",
        "if": "ubus('luci', 'getInitList', {name: 'sysntpd'}).sysntpd.enabled",
        "options": {
          "title": "Service is running",
          "buttonTitle": "Sync with NTP"
        },
        "events": {
          "onClick": [
            "ubus('luci', 'setInitAction', {name: 'sysntpd', action: 'restart'}) &&",
            "snackbar('Server requered')"
          ]
        }
      },
      "uciUI('system', '@timeserver', 0, ['enabled','use_dhcp','server', 'enable_server'])"
    ]
  }
]
