{
  "widget": "set-page",
  "if": "info = ubus('system','info', 1000)",
  "content": [
    {
      "widget": "set-section",
      "content": [
        "load('views/status/include/10_board.content.json')",
        {
          "widget": "set-level",
          "options": {
            "title": "Uptime",
            "icon": "clock-fast",
            "value=": "info.uptime * 1000",
            "unit": "d h:m:s",
            "format": "date:'d HH:mm:ss'",
            "noGraph": true
          }
        },
        {
          "widget": "set-level",
          "options": {
            "title": "Free Memory",
            "icon": "memory",
            "value=": "info.memory.free / 1048576",
            "total=": "info.memory.total / 1048576",
            "unit": "Mb",
            "format": "number:'1.1-1'"
          },
          "content": [
            {
              "widget": "set-level",
              "for": "['buffered', 'cached', 'available']",
              "options": {
                "title=": "['Buffered', 'Cached', 'Available'][$for.index]",
                "value=": "info.memory[$for.data] / 1048576",
                "total=": "info.memory.total / 1048576",
                "unit": "Mb",
                "format": "number:'1.1-1'"
              }
            },
            {
              "widget": "set-level",
              "options": {
                "title": "Swap Memory",
                "value=": "info.swap.free / 1048576",
                "total=": "info.swap.total / 1048576",
                "unit": "Mb",
                "format": "number:'1.1-1'"
              }
            }
          ]
        },
        {
          "widget": "set-level",
          "options": {
            "title": "Load last minute",
            "icon": "chip",
            "value=": "info.load[0] / 65535 * 100",
            "unit": "%",
            "format": "number:'1.1-1'"
          },
          "content": [
            {
              "widget": "set-level",
              "for": "info.load.slice(1)",
              "options": {
                "title=": "`Load last ${$for.index ? 15 : 5} minutes`",
                "value=": "$for.data / 65535 * 100",
                "unit": "%",
                "format": "number:'1.1-1'"
              }
            }
          ]
        },
        {
          "widget": "set-level",
          "if": "disk = ubus('luci2.system', 'diskfree',  5000)",

          "options": {
            "title": "Free Disk",
            "value=": "disk.root.free / 1048576",
            "total=": "disk.root.total / 1048576",
            "format": "number:'1.1-2'",
            "unit": "MB",
            "icon": "sd"
          }
        },
        {
          "widget": "set-level",
          "if": "leases = ubus('luci2.network', 'dhcp_leases',  5000)",
          "options": {
            "title": "DHCP Leases",
            "value=": "leases.leases.length",
            "unit": "leased ip",
            "format": "number:'1.0-0'",
            "icon": "router-wireless",
            "noGraph": true
          },
          "content": [
            {
              "widget": "table",
              "options": {
                "columns": ["hostname", "ipaddr", "macaddr", "expires"],
                "headers": {
                  "hostname": "Hostname",
                  "ipaddr": "IPaddr",
                  "macaddr": "MACaddr",
                  "expires": "Expires"
                },
                "colFormat": ["", "", "", "date:'d HH:mm:ss'"],
                "dataSource=": "leases.leases.map(row => (row.expires*=1000, row))"
              }
            }
          ]
        },
        {
          "widget": "set-level",
          "if": "leases = ubus('luci2.network', 'dhcp6_leases',  5000)",
          "options": {
            "title": "DHCPv6 Leases",
            "value=": "leases.leases.length",
            "unit": "leased ip",
            "format": "number:'1.0-0'",
            "icon": "router-wireless",
            "noGraph": true
          },
          "content": [
            {
              "widget": "table",
              "options": {
                "columns": ["hostname", "ipaddr", "macaddr", "expires"],
                "headers": {
                  "hostname": "Hostname",
                  "ipaddr": "IPaddr",
                  "macaddr": "MACaddr",
                  "expires": "Expires"
                },
                "colFormat": ["", "", "", "date:'d HH:mm:ss'"],
                "actions": [],
                "dataSource=": "leases.leases"
              }
            }
          ]
        },

        {
          "widget": "set-level",
          "if": "conntrack = ubus('luci2.network', 'conntrack_count',  2000)",

          "options": {
            "title": "Connection Tracking",
            "value=": "conntrack.count",
            "total=": "conntrack.limit",
            "format": "number:'1.0-0'",
            "unit": "active",
            "icon": "link"
          }
        }
      ]
    }
  ]
}
